-- Ultimate Utility GUI (Minimal) + Infinite Yield Style Autoclick (autoclick/unautoclick/noautoclick command)
-- ไม่มีปุ่ม Screen Tap, ไม่มีระบบแตะจอ, มีเฉพาะระบบ Autoclick แบบ Infinite Yield (พิมพ์สั่งงานในช่อง CommandBar)

local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "UltimateUtilityGUI"
gui.ResetOnSpawn = false

--------------------- Minimal GUI (CommandBar) ---------------------
local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 360, 0, 80)
frame.Position = UDim2.new(0, 35, 0, 25)
frame.BackgroundColor3 = Color3.fromRGB(30, 32, 38)
frame.BorderSizePixel = 0

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 26)
title.Position = UDim2.new(0, 0, 0, 0)
title.Text = "Ultimate Utility GUI - Autoclick"
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 235, 110)

local autoclickLabel = Instance.new("TextLabel", frame)
autoclickLabel.Size = UDim2.new(1, -20, 0, 18)
autoclickLabel.Position = UDim2.new(0, 10, 0, 28)
autoclickLabel.BackgroundTransparency = 1
autoclickLabel.Font = Enum.Font.Gotham
autoclickLabel.TextSize = 13
autoclickLabel.TextColor3 = Color3.fromRGB(160, 255, 200)
autoclickLabel.Text = "autoclick [click delay] [release delay] | unautoclick/noautoclick"
autoclickLabel.TextXAlignment = Enum.TextXAlignment.Left

local autoclickBar = Instance.new("TextBox", frame)
autoclickBar.Size = UDim2.new(1, -20, 0, 26)
autoclickBar.Position = UDim2.new(0, 10, 0, 48)
autoclickBar.Font = Enum.Font.Gotham
autoclickBar.TextSize = 15
autoclickBar.TextColor3 = Color3.fromRGB(200, 255, 200)
autoclickBar.PlaceholderText = "autoclick 0.1 0.1  หรือ unautoclick"
autoclickBar.ClearTextOnFocus = false
autoclickBar.BackgroundColor3 = Color3.fromRGB(47,52,65)
autoclickBar.Text = ""
autoclickBar.BorderSizePixel = 0

local autoclickStatus = Instance.new("TextLabel", frame)
autoclickStatus.Size = UDim2.new(1, -20, 0, 18)
autoclickStatus.Position = UDim2.new(0, 10, 0, 74)
autoclickStatus.Font = Enum.Font.Gotham
autoclickStatus.TextSize = 13
autoclickStatus.TextColor3 = Color3.fromRGB(200, 255, 200)
autoclickStatus.BackgroundTransparency = 1
autoclickStatus.Text = ""

-------------------- Infinite Yield Style Autoclick Command ------------------

local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local autoclick_enabled = false
local autoclick_conn = nil

local function start_autoclick(click_delay, release_delay)
    if autoclick_conn then autoclick_conn:Disconnect() autoclick_conn = nil end
    autoclick_enabled = true
    autoclickStatus.Text = string.format("AutoClick ON | click: %.2fs | release: %.2fs", click_delay, release_delay)

    autoclick_conn = RunService.RenderStepped:Connect(function()
        if not autoclick_enabled then return end
        -- สำหรับ executor ที่รองรับ mouse1press/mouse1release ให้เปิดคอมเมนต์ 2 บรรทัดล่างนี้
        -- mouse1press()
        -- wait(click_delay)
        -- mouse1release()
        -- wait(release_delay)
        -- (ถ้า executor ทั่วไป ให้ใช้ UserInputService แต่บางเกม/pc จะไม่รองรับ)
        pcall(function()
            UserInputService.InputBegan:Fire({UserInputType=Enum.UserInputType.MouseButton1, UserInputState=Enum.UserInputState.Begin})
            wait(click_delay)
            UserInputService.InputEnded:Fire({UserInputType=Enum.UserInputType.MouseButton1, UserInputState=Enum.UserInputState.End})
            wait(release_delay)
        end)
    end)
end

local function stop_autoclick()
    autoclick_enabled = false
    if autoclick_conn then autoclick_conn:Disconnect() autoclick_conn = nil end
    autoclickStatus.Text = "AutoClick OFF"
end

local function parseAutoclickCommand(cmdstr)
    -- ตัวอย่าง: autoclick 0.1 0.1
    local args = {}
    for word in string.gmatch(cmdstr, "%S+") do table.insert(args, word) end
    if #args == 0 then return end
    local cmd = args[1]:lower()
    if cmd == "autoclick" then
        local click_delay = tonumber(args[2]) or 0.1
        local release_delay = tonumber(args[3]) or 0.1
        start_autoclick(click_delay, release_delay)
    elseif cmd == "unautoclick" or cmd == "noautoclick" then
        stop_autoclick()
    end
end

autoclickBar.FocusLost:Connect(function(enter)
    if enter then
        parseAutoclickCommand(autoclickBar.Text)
        autoclickBar.Text = ""
    end
end)

-------------------- End of Script --------------------

-- วิธีใช้:
-- 1. ดูที่ GUI จะมีช่องพิมพ์ autoclick 0.1 0.1 แล้ว Enter เพื่อเริ่มออโต้คลิก
-- 2. พิมพ์ unautoclick หรือ noautoclick เพื่อหยุด
-- 3. ไม่มีปุ่ม/GUI Screen Tap
-- หมายเหตุ: ถ้า executor รองรับ mouse1press()/mouse1release() ให้เปิดคอมเมนต์ใน start_autoclick() จะคลิกได้จริงทุกเกม
